---
import Project from "../components/molecules/project.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const PROJECTS = [
    {
        title: t("project.vuln_scanner.title"),
        definition: t("project.vuln_scanner.description"),
        names: ["Python", "Docker", "OWASP ZAP", "Bash"],
    },
    {
        title: t("project.secure_pipeline.title"),
        definition: t("project.secure_pipeline.description"),
        names: ["Jenkins", "Terraform", "AWS", "SonarQube"],
    },
    {
        title: t("project.banking_api.title"),
        definition: t("project.banking_api.description"),
        names: ["Java", "Spring Boot", "PostgreSQL", "Docker"],
    },
    {
        title: t("project.encrypted_chat.title"),
        definition: t("project.encrypted_chat.description"),
        names: ["Node.js", "React", "Socket.io", "Redis"],
    },
];
---

<section class="flex flex-col gap-2">
    <h2 class="font-titles font-bold color-text-title text-2xl">
        {t("projects.title")}
    </h2>
    <div
        id="projects-carousel"
        class="flex flex-nowrap items-start overflow-x-auto snap-x snap-mandatory gap-4 pb-4 md:pb-0 md:grid md:grid-cols-2 md:gap-4 md:overflow-visible md:snap-none"
    >
        <div class="contents md:flex md:flex-col md:gap-4">
            {
                PROJECTS.slice(0, 2).map((project) => (
                    <div class="min-w-full snap-center md:min-w-0">
                        <Project
                            title={project.title}
                            definition={project.definition}
                            names={project.names}
                        />
                    </div>
                ))
            }
        </div>
        <div class="contents md:flex md:flex-col md:gap-4">
            {
                PROJECTS.slice(2).map((project) => (
                    <div class="min-w-full snap-center md:min-w-0">
                        <Project
                            title={project.title}
                            definition={project.definition}
                            names={project.names}
                        />
                    </div>
                ))
            }
        </div>
    </div>
</section>
